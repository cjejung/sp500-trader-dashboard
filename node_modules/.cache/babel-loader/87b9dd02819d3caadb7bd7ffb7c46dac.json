{"ast":null,"code":"import * as r from \"react\";\nimport { u as t } from \"./defineProperty-38df0e0b.js\";\nimport e from \"lodash.isequal\";\n\nvar n = function (r) {\n  if (Array.isArray(r)) return r;\n};\n\nvar u = function (r, t) {\n  if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(r)) {\n    var e = [],\n        n = !0,\n        u = !1,\n        o = void 0;\n\n    try {\n      for (var a, c = r[Symbol.iterator](); !(n = (a = c.next()).done) && (e.push(a.value), !t || e.length !== t); n = !0);\n    } catch (r) {\n      u = !0, o = r;\n    } finally {\n      try {\n        n || null == c.return || c.return();\n      } finally {\n        if (u) throw o;\n      }\n    }\n\n    return e;\n  }\n};\n\nvar o = function () {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n};\n\nvar a = function (r, e) {\n  return n(r) || u(r, e) || t(r, e) || o();\n},\n    c = function (t, e, n) {\n  r.useEffect(function () {\n    e && (e.current[t] = {\n      state: n\n    });\n  }, [e, t, n]);\n},\n    f = function (t, e, n, u, o) {\n  var c = r.useReducer(t, e),\n      f = a(c, 2),\n      i = f[0],\n      s = f[1],\n      l = r.useRef();\n  return r.useEffect(function () {\n    l.current && (u.forEach(function (r) {\n      return r(l.current, i, o ? o.current : void 0);\n    }), l.current = null);\n  }, [o, u, i]), [i, function (r) {\n    n.forEach(function (t) {\n      return t(r, i, o ? o.current : void 0);\n    }), l.current = r, s(r);\n  }];\n},\n    i = function (t, n, u) {\n  var o = r.useRef(t),\n      a = r.useRef(t);\n  r.useEffect(function () {\n    e(n, a.current) && (e(t, o.current) || e(t, n) || u()), o.current = t, a.current = n;\n  }, [n, u, t]);\n};\n\nexport { i as a, c as b, a as s, f as u };","map":{"version":3,"sources":["../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../src/common/util/useSyncRefState.js","../src/common/util/useReducerWithMiddleware.js","../src/common/util/useSyncControlledState.js"],"names":["arr","Array","isArray","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","TypeError","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","useSyncRefState","name","context","state","React","useEffect","current","useReducerWithMiddleware","reducer","controlledState","middlewareFns","afterwareFns","dispatch","useReducer","aRef","useRef","action","forEach","middlewareFn","afterwareFn","useSyncControlledState","callback","previousControlledState","previousState","isEqual"],"mappings":"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","sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import * as React from 'react';\n\nconst useSyncRefState = (name, context, state) => {\n  React.useEffect(() => {\n    if (!context) return;\n\n    context.current[name] = {\n      state,\n    };\n  }, [context, name, state]);\n};\n\nexport { useSyncRefState };\n","import * as React from 'react';\n\nconst useReducerWithMiddleware = (\n  reducer,\n  controlledState,\n  middlewareFns,\n  afterwareFns,\n  context\n) => {\n  const [state, dispatch] = React.useReducer(\n    reducer,\n    controlledState\n  );\n\n  const aRef = React.useRef();\n\n  const dispatchWithMiddleware = (action) => {\n    middlewareFns.forEach((middlewareFn) =>\n      middlewareFn(\n        action,\n        state,\n        context ? context.current : undefined\n      )\n    );\n\n    aRef.current = action;\n\n    dispatch(action);\n  };\n\n  React.useEffect(() => {\n    if (!aRef.current) return;\n\n    afterwareFns.forEach((afterwareFn) =>\n      afterwareFn(\n        aRef.current,\n        state,\n        context ? context.current : undefined\n      )\n    );\n\n    aRef.current = null;\n  }, [context, afterwareFns, state]);\n\n  return [state, dispatchWithMiddleware];\n};\n\nexport { useReducerWithMiddleware };\n","import * as React from 'react';\nimport isEqual from 'lodash.isequal';\n\nconst useSyncControlledState = (controlledState, state, callback) => {\n  const previousControlledState = React.useRef(controlledState);\n  const previousState = React.useRef(controlledState);\n\n  React.useEffect(() => {\n    if (!isEqual(state, previousState.current)) {\n      // do nothing, because it's a internal state change\n    } else if (\n      !isEqual(controlledState, previousControlledState.current) &&\n      !isEqual(controlledState, state)\n    ) {\n      callback();\n    }\n\n    previousControlledState.current = controlledState;\n    previousState.current = state;\n  }, [state, callback, controlledState]);\n};\n\nexport { useSyncControlledState };\n"]},"metadata":{},"sourceType":"module"}